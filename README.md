# Maintenance Screen

[![Codacy Badge](https://api.codacy.com/project/badge/Grade/1124b9270e0145fd9b61ff1d19a822ac)](https://www.codacy.com/app/ProgMiner/maintenance-screen?utm_source=github.com&amp;utm_medium=referral&amp;utm_content=ProgMiner/maintenance-screen&amp;utm_campaign=Badge_Grade)
[![Maintainability](https://api.codeclimate.com/v1/badges/445ff68081083b77ff4b/maintainability)](https://codeclimate.com/github/ProgMiner/maintenance-screen/maintainability)

The "Maintenance mode" screen library

- [Installation](#installation)
- [Usage](#usage)
- [Documentation](#documentation)
- [Todo](#todo)

### Installation

```bash
composer require progminer/maintenance-screen
```

### Usage

You can use this library for full or particional site closing.

- In first case we recommended you to use the [`maintenance-screen-project`](https://packagist.org/packages/progminer/maintenance-screen-project).
It is a base application based on this library.
If you needs to making you own application based on this library, please use sources from the above mentioned project.

- In second case you need to create an instance of [`MaintenanceScreen\MaintenanceScreen`](https://progminer.github.io/maintenance-screen/MaintenanceScreen/MaintenanceScreen.html) using constructor (regular method) or [`MaintenanceScreen\MaintenanceScreen::makeFrom`](https://progminer.github.io/maintenance-screen/MaintenanceScreen/MaintenanceScreen.html#method_makeFrom) (if you have a special configuration file).

Here is a regular second case method example:
```php
use MaintenanceScreen\MaintenanceScreen;
use MaintenanceScreen\TranslatorProvider;
use MaintenanceScreen\ConfigurationLoader;

$config = [
    'template_name'    => 'Default', // template name
    'default_language' => 'en',      // uses if Accept-Language is not provided
    'charset'          => 'utf-8'    // not required
];

$translatorsLoader = new ConfigurationLoader(
    [__DIR__.'/Resources/translations'], // Array with paths to loading translation files (not required)
    []                                   // Array with not included in library loaders (not required)
);

// Twig_Environment
$twig = new \Twig_Environment(
    new \Twig_Loader_Filesystem([__DIR__.'/Resources/templates'], __DIR__),
    ['cache' => __DIR__.'/Resources/twig_cache']
);

$maintenanceScreen = new MaintenanceScreen(
    $config,
    new TranslatorProvider($translatorsLoader),
    $twig
);
```

When you have an instance of [`MaintenanceScreen\MaintenanceScreen`](https://progminer.github.io/maintenance-screen/MaintenanceScreen/MaintenanceScreen.html) you can render and/or send rendered `Response`:

- Rendering:
```php
/**
 * @var \Symfony\Component\HttpFoundation\Response
 */
$response = $maintenanceScreen->render();
```
- Sending:
```php
$maintenanceScreen->send();
```

Both methods have not required argument `$request` - instance of class `\Symfony\Component\HttpFoundation\Request`.
If it is not provided methods calls a `Request::createFromGlobals` method for getting current request.

### Documentation

Autogenerated documentation is available [here](https://progminer.github.io/maintenance-screen/).

### Todo

- Make library separated from configuration files needing (`config-splitting` branch)
- Make library separated from templates format
